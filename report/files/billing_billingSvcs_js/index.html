<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - billing/billingSvcs.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome-ie7.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>billing/billingSvcs.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">72.54</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">144</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">14.00</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">0.76</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">angular.module(&#039;billingSvcs&#039;, [&#039;ngResource&#039;])
   /**
    * @ngdoc service
    * @name billingSvcs.Transform
    * @description
    *
    * Transform a Json message into an object and fetch a specific path from it. (Or all of it)
    */
   .factory(&#039;Transform&#039;, function () {
        var fromPath = function (obj, path) {
            obj = _.reduce(path, function (val, key) {
                return _.has(val, key) ? val[key] : false;
            }, obj);
            return obj;
        };
        return function (path, msgPath) {
            // Pre parse the path into an array
            // Set path to empty string if not given
            var splitPath = _.isEmpty(path) ? [] : path.split(&#039;.&#039;),
                msgSplitPath = _.isEmpty(msgPath) ? [] : msgPath.split(&#039;.&#039;);
            return function (data) {
                var json = angular.fromJson(data),
                    errorMsg = fromPath(json, msgSplitPath);
                return errorMsg ? errorMsg : fromPath(json, splitPath);
            };
        };
    })
   /**
    * @ngdoc service
    * @name billingSvcs.Transaction
    * @description
    * Transaction Service for interaction with Billing API
    *
    * @requires $resource - AngularJS service to extend the $http and wrap AJAX calls to API&#039;s.
    */
    .factory(&#039;Transaction&#039;, function ($resource) {
        return $resource(&#039;/api/accounts/billing/:id/transactions&#039;,
            {
                id: &#039;@id&#039;
            },
            {
                list: { method: &#039;GET&#039;, isArray: true }
            }
        );
    })
   /**
    * @ngdoc service
    * @name billingSvcs.Account
    * @description
    * Account Service for interaction with Billing API
    *
    * @requires $resource - AngularJS service to extend the $http and wrap AJAX calls to API&#039;s.
    */
    .factory(&#039;Account&#039;, function ($resource) {
        return $resource(&#039;/api/accounts/billing/:id&#039;);
    })
   /**
    * @ngdoc service
    * @name billingSvcs.Period
    * @description
    * Period Service for interaction with Billing API
    *
    * @requires $resource - AngularJS service to extend the $http and wrap AJAX calls to API&#039;s.
    */
    .factory(&#039;Period&#039;, function ($resource, Transform) {
        var transform = Transform(&#039;billingPeriods.billingPeriod&#039;, &#039;details&#039;);
        return $resource(&#039;/api/accounts/billing/:id/billing-periods&#039;,
            {
                id: &#039;@id&#039;,
                marker: 0,
                limit: 10
            },
            {
                list: { method: &#039;GET&#039;, isArray: true, transformResponse: transform }
            }
        );
    })
   /**
    * @ngdoc service
    * @name billingSvcs.EstimatedCharges
    * @description
    * Estimated Charges Service for interaction with Billing API
    *
    * @requires $resource - AngularJS service to extend the $http and wrap AJAX calls to API&#039;s.
    */
    .factory(&#039;EstimatedCharges&#039;, function ($resource, Transform) {
        var transform = Transform(&#039;estimatedCharges.estimatedCharge&#039;, &#039;details&#039;);
        return $resource(&#039;/api/accounts/:id/billing-periods/:periodId/estimatedCharges&#039;,
            {
                id: &#039;@id&#039;,
                periodId: &#039;@periodId&#039;
            },
            {
                list: { method: &#039;GET&#039;, isArray: true, transformResponse: transform }
            }
        );
    })
    /**
     * @ngdoc service
     * @name billingSvcs.Payment
     * @description
     * Payment Service for interaction with Billing API
     *
     * @requires $resource - AngularJS service to extend the $http and wrap AJAX calls to API&#039;s.
     */
    .factory(&#039;Payment&#039;, function ($resource, Transform) {
        var transform = Transform(&#039;payments.payment&#039;, &#039;papi:badRequest.details&#039;);
        return $resource(&#039;/api/accounts/payments/:id&#039;,
            {
                id: &#039;@id&#039;,
                marker: 0,
                limit: 10
            },
            {
                list: { method: &#039;GET&#039;, isArray: true, transformResponse: transform },
                // I realize this seems redundant, but verbally Payment.post makes more sense than Payment.save
                post: { method: &#039;POST&#039; }
            }
        );
    })
    /**
     * @ngdoc service
     * @name billingSvcs.PaymentMethod
     * @description
     * Payment Service for interaction with Billing API
     *
     * @requires $resource - AngularJS service to extend the $http and wrap AJAX calls to API&#039;s.
     */
    .factory(&#039;PaymentMethod&#039;, function ($resource, Transform) {
        var transform = Transform(&#039;methods.method&#039;, &#039;papi:badRequest.details&#039;);
        return $resource(&#039;/api/accounts/payments/:id/methods&#039;,
            {
                id: &#039;@id&#039;,
                marker: 0,
                showDisabled: true
            },
            {
                list: { method: &#039;GET&#039;, isArray: true, transformResponse: transform }
            }
        );
    })
    .constant(&#039;DATE_FORMAT&#039;, &#039;MM / dd / yyyy&#039;)
    .constant(&#039;TRANSACTION_TYPES&#039;, [&#039;Payment&#039;, &#039;Invoice&#039;, &#039;Reversal&#039;, &#039;Adjustment&#039;])
    .constant(&#039;TRANSACTION_STATUSES&#039;, [&#039;Paid&#039;, &#039;Settled&#039;, &#039;Unpaid&#039;]);</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
