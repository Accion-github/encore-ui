<rx-modal-form
    submitText="Confirm Payment"
    title="Make a Payment"
    subtitle="{{user}}">
    <div class="payment-action">
        <div class="account-summary">
            <div class="amount flush-left">
                <strong>Account Balance</strong>
                <p>{{account.balance | CurrencySuffix }}</p>
                <div class="arrow-down"></div>
            </div>
            <div class="amount flush-left">
                <strong>Due Today</strong>
                <p>{{account.currentDue | CurrencySuffix }}</p>
                <div class="arrow-down"></div>
            </div>
            <div class="amount flush-left">
                <strong>Past Due</strong>
                <p>{{account.pastDue | CurrencySuffix }}</p>
                <div class="arrow-down"></div>
            </div>
        </div>
        <div class="payment-field payment-amount">
            <rx-form-input
                type="text"
                label="Payment Amount"
                required="true"
                model="payment_amount"
                field-id="paymentAmount"
            ></rx-form-input>
        </div>
        <div class="payment-field">
            <fieldset class="form-item">
                <label for="paymentOption" class="field-label">Payment Options:</label>
                <div class="field-select">
                    <select name="paymentOption" id="paymentOption" ng-model="payment_method" class="payment-select">
                        <option ng-repeat="payment in paymentMethods" value="{{$index}}" ng-disabled="payment.disabled == 'true'">
                            {{payment.electronicCheck && 'ACH' || 'Credit Card'}} - 
                            {{payment.electronicCheck && payment.electronicCheck.accountType || payment.paymentCard.cardType}}
                            {{payment.electronicCheck && payment.electronicCheck.accountNumber || payment.paymentCard.cardNumber}}
                        </option>
                    </select>
                </div>
                <div class="payment-option-desc">
                    <div ng-show="payment_method != undefined">
                        <dl>
                            <dt>{{paymentMethods[payment_method].electronicCheck && 'Account' || 'Card'}} Type:</dt>
                            <dd>{{paymentMethods[payment_method].electronicCheck && paymentMethods[payment_method].electronicCheck.accountType || paymentMethods[payment_method].paymentCard.cardType}}</dd>
                            <dt>Name:</dt>
                            <dd>{{paymentMethods[payment_method].electronicCheck && paymentMethods[payment_method].electronicCheck.accountHolderName || paymentMethods[payment_method].paymentCard.cardHolderName}}</dd>
                            <dt ng-show="paymentMethods[payment_method].electronicCheck.routingNumber">Routing #:</dt>
                            <dd ng-show="paymentMethods[payment_method].electronicCheck.routingNumber">{{paymentMethods[payment_method].electronicCheck.routingNumber}}</dd>
                            <dt>Number:</dt>
                            <dd>{{paymentMethods[payment_method].electronicCheck && paymentMethods[payment_method].electronicCheck.accountNumber || paymentMethods[payment_method].paymentCard.cardNumber}}</dd>
                            <dt ng-show="paymentMethods[payment_method].paymentCard.cardExpirationDate">Exp. Date:</dt>
                            <dd ng-show="paymentMethods[payment_method].paymentCard.cardExpirationDate">{{paymentMethods[payment_method].paymentCard.cardExpirationDate}}</dd>
                        </dl>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
</rx-modal-form>
