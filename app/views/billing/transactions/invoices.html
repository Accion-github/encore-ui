<rx-page title="'Billing - ' + transaction.invoice.tranRefNum + ' - Invoice'" subtitle="'On account ' + account.name">
    <div class="section billing-info">
        <hr />
        <h3 class="section-title">
            Billing Cycle: {{transaction.invoice.coverageStartDate | date:'mediumDate'}} - {{transaction.invoice.coverageEndDate | date:'longDate'}}
        </h3>
        <div class="section-grid">
            <div class="col-1-3 invoice-summary">
                <dl class="list-definition pull-left">
                    <dt class="accent">Amount Due:</dt>
                    <dd class="accent accent-group">
                        <span class="accent-text-invoice">
                            <span ng-if="transaction.invoice.invoiceTotal">
                                {{transaction.invoice.invoiceTotal | currency }} {{transaction.invoice.currency}}
                            </span>
                            <span ng-if="!transaction.invoice.invoiceTotal">
                                N/A
                            </span>
                        </span>
                    </dd>
                    <dt>Tax:</dt>
                    <dd ng-if="transaction.invoice.taxTotal">{{transaction.invoice.taxTotal | currency }} {{transaction.invoice.currency}}</dd>
                    <dd ng-if="!transaction.invoice.taxTotal">N/A</dd>
                    <dt>Purchase Order:</dt>
                    <dd>{{transaction.invoice.poNumber || 'N/A'}}</dd>
                    <dt>Consolidated Account:</dt>
                    <dd>{{transaction.invoice.consolidatedAccountNumber || 'N/A'}}</dd>
                </dl>
            </div>
            <div class="col-1-3 download">
                <h3 class="section-title">
                    <img src="/billing/images/icon-export.png">
                    <button class="btn-link" type="button" ng-click="downloadCsv()">Download CSV</button>
                </h3>
                <h3 class="section-title">
                    <img src="/billing/images/icon-export.png">
                    <button class="btn-link" type="button" ng-click="downloadPdf()">Download PDF</button>
                </h3>
            </div>
        </div>
    </div>
    <div class="section billing-usage">
        <h3 class="section-title">
            By Product
        </h3>
        <div class="section-grid">
            <div class="col-2-3">
                <table class="table usage-list">
                    <thead>
                        <tr>
                            <th scope="col">
                                <rx-sortable-column
                                    sort-method="sortCol"
                                    sort-property="name"
                                    predicate="sort.predicate"
                                    reverse="sort.reverse">
                                    Product
                                </rx-sortable-column>
                            </th>
                            <th scope="col">
                                <rx-sortable-column
                                    sort-method="sortCol"
                                    sort-property="itemAmount"
                                    predicate="sort.predicate"
                                    reverse="sort.reverse">
                                    Usage Charges
                                </rx-sortable-column>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in transaction.invoice.invoiceItem | orderBy:sort.predicate:sort.reverse">
                            <td>{{ item.name }}</td>
                            <td>{{ item.itemAmount | currency }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</rx-page>
